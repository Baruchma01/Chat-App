{"ast":null,"code":"var _jsxFileName = \"/Users/baruchmashasha/Desktop/Chat-App/client/src/containers/Chat/Chat.js\";\nimport React, { useState, useEffect } from \"react\";\nimport classes from \"./Chat.css\";\nimport openSocket from \"socket.io-client\";\nimport { useHistory } from 'react-router-dom';\nconst socket = openSocket(\"http://localhost:5000\");\n\nconst Chat = ({\n  location\n}) => {\n  const history = new useHistory();\n  const [msg, setMsg] = useState(\"\");\n  const [roomMessage, setRoomMessage] = useState([]);\n  const [activeUsers, setActiveUsers] = useState([]);\n  const [currentRoom, setCurrentRoom] = useState(\"\");\n  const {\n    username,\n    room\n  } = location.state.user;\n  useEffect(() => {\n    socket.emit(\"joinRoom\", {\n      username,\n      room\n    });\n  }, []); // Get message from the server\n\n  socket.on(\"message\", message => {\n    setRoomMessage([...roomMessage, message]);\n  }); // Get room and users\n\n  socket.on(\"roomUsers\", ({\n    room,\n    users\n  }) => {\n    setActiveUsers(users);\n    setCurrentRoom(room);\n  });\n\n  const submitMessageHandler = e => {\n    e.preventDefault();\n\n    if (msg.length === 0) {\n      return console.log(\"error: empty msg\");\n    } else {\n      socket.emit(\"chatMessage\", msg);\n    }\n  };\n\n  const handleMsgChange = e => {\n    setMsg(e.target.value);\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.ChatContainer,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"header\", {\n    className: classes.ChatHeader,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"i\", {\n    className: \"fas fa-smile\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 11\n    }\n  }), \" ChatCord\"), /*#__PURE__*/React.createElement(\"a\", {\n    className: classes.Btn,\n    onClick: () => {\n      socket.disconnect();\n      history.push('/');\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 9\n    }\n  }, \"Leave Room\")), /*#__PURE__*/React.createElement(\"main\", {\n    className: classes.ChatMain,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.ChatSideBar,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"h3\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"i\", {\n    className: \"fas fa-comments\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 13\n    }\n  }), \" Room Name:\"), /*#__PURE__*/React.createElement(\"h2\", {\n    id: \"room-name\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 11\n    }\n  }, currentRoom), /*#__PURE__*/React.createElement(\"h3\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"i\", {\n    className: \"fas fa-users\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 13\n    }\n  }), \" Users\"), /*#__PURE__*/React.createElement(\"ul\", {\n    id: \"users\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 11\n    }\n  }, (activeUsers || []).map(user => /*#__PURE__*/React.createElement(\"li\", {\n    key: user.id,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 15\n    }\n  }, user.username)))), /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.ChatMessage,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 9\n    }\n  }, (roomMessage || []).map(message => /*#__PURE__*/React.createElement(\"div\", {\n    key: Math.random(),\n    className: classes.Message,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    className: classes.Meta,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 15\n    }\n  }, message.username, \" \", /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 36\n    }\n  }, message.time)), /*#__PURE__*/React.createElement(\"p\", {\n    className: \"text\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 15\n    }\n  }, message.text))))), /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.ChatFormContainer,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"form\", {\n    id: \"chat-form\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    id: \"msg\",\n    type: \"text\",\n    placeholder: \"Enter Message\",\n    value: msg,\n    onChange: handleMsgChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(\"button\", {\n    className: classes.Btn,\n    onClick: submitMessageHandler,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"i\", {\n    className: \"fas fa-paper-plane\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 13\n    }\n  }), \" Send\"))));\n};\n\nexport default Chat;","map":{"version":3,"sources":["/Users/baruchmashasha/Desktop/Chat-App/client/src/containers/Chat/Chat.js"],"names":["React","useState","useEffect","classes","openSocket","useHistory","socket","Chat","location","history","msg","setMsg","roomMessage","setRoomMessage","activeUsers","setActiveUsers","currentRoom","setCurrentRoom","username","room","state","user","emit","on","message","users","submitMessageHandler","e","preventDefault","length","console","log","handleMsgChange","target","value","ChatContainer","ChatHeader","Btn","disconnect","push","ChatMain","ChatSideBar","map","id","ChatMessage","Math","random","Message","Meta","time","text","ChatFormContainer"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport classes from \"./Chat.css\";\nimport openSocket from \"socket.io-client\";\nimport { useHistory } from 'react-router-dom'\nconst socket = openSocket(\"http://localhost:5000\");\n\nconst Chat = ({ location }) => {\n  const history = new useHistory();\n  const [msg, setMsg] = useState(\"\");\n  const [roomMessage, setRoomMessage] = useState([]); \n  const [activeUsers, setActiveUsers] = useState([]);\n  const [currentRoom, setCurrentRoom] = useState(\"\");\n\n  const { username, room } = location.state.user;\n\n  useEffect(() => {\n    socket.emit(\"joinRoom\", { username, room });\n  }, []);\n\n  // Get message from the server\n  socket.on(\"message\", (message) => {\n    setRoomMessage([...roomMessage, message]);\n  });\n\n  // Get room and users\n  socket.on(\"roomUsers\", ({ room, users }) => {\n    setActiveUsers(users);\n    setCurrentRoom(room);\n  });\n\n  const submitMessageHandler = (e) => {\n    e.preventDefault();\n    if (msg.length === 0) {\n      return console.log(\"error: empty msg\");\n    } else {\n      socket.emit(\"chatMessage\", msg);\n    }\n  };\n\n  const handleMsgChange = (e) => {\n    setMsg(e.target.value);\n  };\n\n  return (\n    <div className={classes.ChatContainer}>\n      <header className={classes.ChatHeader}>\n        <h1>\n          <i className=\"fas fa-smile\"></i> ChatCord\n        </h1>\n        <a className={classes.Btn} onClick={() => { socket.disconnect(); history.push('/') }}>Leave Room</a>\n      </header>\n      <main className={classes.ChatMain}>\n        <div className={classes.ChatSideBar}>\n          <h3>\n            <i className=\"fas fa-comments\"></i> Room Name:\n          </h3>\n          <h2 id=\"room-name\">{currentRoom}</h2>\n          <h3>\n            <i className=\"fas fa-users\"></i> Users\n          </h3>\n          <ul id=\"users\">\n            {(activeUsers || []).map((user) => (\n              <li key={user.id}>{user.username}</li>\n            ))}\n          </ul>\n        </div>\n        <div className={classes.ChatMessage}>\n          {(roomMessage || []).map((message) => (\n            <div key={Math.random()} className={classes.Message}>\n              <p className={classes.Meta}>\n                {message.username} <span>{message.time}</span>\n              </p>\n              <p className=\"text\">{message.text}</p>\n            </div>\n          ))}\n        </div>\n      </main>\n      <div className={classes.ChatFormContainer}>\n        <form id=\"chat-form\">\n          <input\n            id=\"msg\"\n            type=\"text\"\n            placeholder=\"Enter Message\"\n            value={msg}\n            onChange={handleMsgChange}\n          />\n          <button className={classes.Btn} onClick={submitMessageHandler}>\n            <i className=\"fas fa-paper-plane\"></i> Send\n          </button>\n        </form>\n      </div>\n    </div>\n  );\n};\n\nexport default Chat;\n"]},"metadata":{},"sourceType":"module"}